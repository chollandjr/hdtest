<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NPS Helpdesk Landing Page</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<!--<link href="css/custom.css" rel="stylesheet"> -->
	<!-- less elements -->
	<!-- set options before less.js script -->
	<link rel="stylesheet/less" type="text/css" href="css/custom.less" />
	<script>
		less = {
			env: "development",
		};
	</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js"></script>

	<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
<!-- <nav class="navbar navbar-inverse navbar-static-top">
	<a class="navbar-brand" href="http://www.npsct.org">Newington Public Schools</a>
	<div class="container">
	<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="http://status.npsct.org">Status Website</a></li>
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support Resources<span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a href="#">IT Guides</a></li>
						<li><a href="#">Other</a></li>
					</ul>
				</li>
				<li><a href="#">Contact</a></li>
			</ul>
		</div> 
	</div> 
</nav> -->
<div class="jumbotron">
	<div class="container">
		<h1>NPS Helpdesk</h1>
		<p>Welcome. We are happy to help. </p>
	</div>
</div>
<div class="alerts">		
	<a href="http://status.npsct.org" target="_blank"> <div id="status" class="alert" >	</div> </a>
	<div id=announce class="alert" style="display: none">
			Upcoming Maintenance:
		</div>
	<div id="maint" class="alert" style="display: none">
	</div> 
	<!--The message above will indicate if the IT Department is aware of a outage for most common services. -->
</div>

<h3>Please choose from one of the categories below to submit a new request:</h3>
<section class="panel-example">
    <div class="panel-group" id="accordion">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">A device or software is not working as it should. (IT Request)</a>
                </h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse">
                <div class="panel-body">
                    <p>Click the button to request a repair for device or software.
					<a class="btn btn-primary btn-lg" href="https://nboe.npsct.org:8443/WorkOrder.do?reqTemplate=3104" role="button">Repair »</a></p>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">Help using classroom technology. (Ed Tech Request)</a>
                </h4>
            </div>
            <div id="collapseTwo" class="panel-collapse collapse">
                <div class="panel-body">
                    <p>Click the button to request help with using a device or software.
					<a class="btn btn-primary btn-lg" href="https://nboe.npsct.org:8443/WorkOrder.do?reqTemplate=3103" role="button">How To »</a></p>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">Powerschool & Gradebook (Student Data Systems)</a>
                </h4>
            </div>
            <div id="collapseFour" class="panel-collapse collapse">
                <div class="panel-body">
                    <p>Click button to request help with Powerschool, Gradebook, or other student data system.
					<a class="btn btn-primary btn-lg" href="https://nboe.npsct.org:8443/WorkOrder.do?reqTemplate=3402" role="button">Powerschool »</a></p>
                </div>
            </div>
        </div>
        <div class="panel panel-default" style="display:none">
            <div class="panel-heading" >
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Chromebook Request</a>
                </h4>
            </div>
            <div id="collapseThree" class="panel-collapse collapse">
                <div class="panel-body">
                    <p>Click a button to request Chromebook assistance. 
					<a class="btn btn-primary btn-lg" href="#" role="button">Student Chromebook Repair </a>
					<a class="btn btn-primary btn-lg" href="#" role="button">New Device Request </a>
					<a class="btn btn-primary btn-lg" href="#" role="button">Cart-based Chromebook Repair </a></p>
                </div>
            </div>
        </div>
    </div>
</section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/moment.js"> //source and docs @ https://momentjs.com/</script>
	
<script>

	$.ajax({
		url: 'http://status.npsct.org/api/v1/status',
		dataType: 'json',
		method: 'get',
		cache: false,
		success: function(data) {
			//console.log(data);
			$(data).each(function (index,item) {
				//console.log();
				
				if (item.data.status == "success") { 
					color = "#31A54E"
					document.getElementById("status").style.background = (color);
					document.getElementById("status").style.border = (color);
					}
				if (item.data.status == "info") { 
					color = "#FF8800"
					document.getElementById("status").style.background = (color);
					document.getElementById("status").style.border = (color);
					}
				if (item.data.status == "danger") { 
					color = "#FF6F6F"
					document.getElementById("status").style.background = (color);
					document.getElementById("status").style.border = (color);
					}
			
				{document.getElementById("status").innerHTML =(item.data.message) + " : Click for more details."};
			})
				}
	});

</script>

<script type="text/javascript">
	var today = new Date();
	$.ajax({
		url: 'http://status.npsct.org/api/v1/schedules',
		dataType: 'json',
		method: 'get',
		cache: false,
		success: function(data) {
			//console.log(data);
			$.each(data, function(index,item) {
				$.each(item, function(key,value) {
					//console.log(item[key].scheduled_at);
					//console.log(item[key].name);
					//console.log(item[key].message);

					if ((Date.parse(item[key].scheduled_at)) >= (Date.parse(today))) { 
						document.getElementById("maint").style.display = "";
						document.getElementById("announce").style.display = "";
						document.getElementById("maint").style.height = "100%";
						document.getElementById("announce").style.height = "100%";
						
						maintdate = moment(item[key].scheduled_at).format('LLL');
						mainttime = moment(item[key].scheduled_at).format('MM/DD/YYYY');
						maintfromnow = moment(item[key].scheduled_at).fromNow();
						maintcal = moment(item[key].scheduled_at).calendar();
						mainthead = (item[key].name)+" - "+maintfromnow+": ("+maintcal+")";
						maintmessage = (item[key].message);
						//console.log(mainthead);console.log(maintmessage);console.log(maintdate);console.log(maintfromnow);console.log(maintcal);

							//add div for first maint, populate, format
							var iDiv = document.getElementById("maint");
							//iDiv.id = 'maint';
							
							// Create the inner div before appending to the body
							var innerHead = document.createElement('div');
							innerHead.id = 'maintHead'+[key];
							var innerMess = document.createElement('div');
							innerMess.id = 'maintMess'+[key];


							iDiv.appendChild(innerHead);
							iDiv.appendChild(innerMess);
							//console.log(iDiv);console.log(innerHead);console.log(innerMess);
							
							//pupulate the divs
							document.getElementById("maintHead"+[key]).appendChild(document.createTextNode(mainthead));
							document.getElementById("maintMess"+[key]).appendChild(document.createTextNode(maintmessage));

					}
					else {
						document.getElementById("maint").style.display = "none";
					}

				})
			})
		}
	});
</script>
<div id="copyright">&copy; Newington Public Schools</div>
  </body>
</html>
